#include <ncurses.h> // Подключаем библиотеку ncurses

int main(void) 
{
    int gold = 15;
    int goblin_hp = 3;
    int is_running = 1; // Флаг для завершения игры
    char player_action;

    // Инициализация ncurses
    initscr();              // Инициализация экрана
    noecho();               // Отключение вывода символов ввода
    cbreak();               // Немедленная обработка ввода
    keypad(stdscr, TRUE);   // Включение поддержки клавиш, таких как стрелки

    // Начальное приветствие
    mvprintw(0, 0, "На вас напал гоблин! У него %d здоровья.", goblin_hp);
    mvprintw(1, 0, "Ваши действия: 'A'таковать или 'R'ануться.");
    refresh();

    while (is_running) 
    {
        player_action = getch(); // Считываем действие игрока

        // Действие игрока
        if (player_action == 'a' || player_action == 'A') 
        {
            goblin_hp--; // Уменьшаем здоровье гоблина
            mvprintw(3, 0, "Вы ударили гоблина! Его здоровье: %d   ", goblin_hp); // Обновляем строку

            if (goblin_hp <= 0) 
            {
                mvprintw(5, 0, "Вы победили гоблина и получили %d золота!", gold);
                mvprintw(6, 0, "Игра завершена. Нажмите любую клавишу, чтобы выйти.");
                refresh();
                getch(); // Ожидание перед выходом
                break;
            }
        } 
        else if (player_action == 'r' || player_action == 'R') 
        {
            mvprintw(5, 0, "Вы решили убежать! Гоблин остался жив...");
            mvprintw(6, 0, "Игра завершена. Нажмите любую клавишу, чтобы выйти.");
            refresh();
            getch(); // Ожидание перед выходом
            break;
        } 
        else 
        {
            mvprintw(4, 0, "Неверное действие! Попробуйте снова.        "); // Очистка строки при неверном вводе
        }

        refresh(); // Обновляем экран
    }

    endwin(); // Завершаем работу ncurses
    return 0;
}
